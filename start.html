<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Start Your Conversion | Hawaiʻi Cesspool Help</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Begin your cesspool to septic conversion on Hawaiʻi Island. We coordinate with licensed engineers and local installers.">
<link rel="canonical" href="https://www.hawaiicesspoolhelp.com/start.html">
<link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/gh/hawaiisystemscoord-afk/asset@main/Hawaii%20Cesspool%20Help%20-%20Favicon.png">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="preload" as="image" href="https://cdn.jsdelivr.net/gh/hawaiisystemscoord-afk/asset@main/Beach.webp" fetchpriority="high">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
<!-- Security meta -->
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  img-src 'self' https://cdn.jsdelivr.net data:;
  style-src 'self' 'unsafe-inline';
  script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.google.com https://www.gstatic.com;
  connect-src 'self' https://script.google.com https://script.googleusercontent.com https://www.google-analytics.com https://www.googletagmanager.com https://www.google.com https://www.gstatic.com;
  frame-src 'self' https://www.google.com https://www.gstatic.com;
  child-src 'self' https://www.google.com https://www.gstatic.com;
  base-uri 'self'
">
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
<meta http-equiv="X-Content-Type-Options" content="nosniff">

<meta property="og:type" content="website">
<meta property="og:site_name" content="Hawaii Cesspool Help">
<meta property="og:title" content="Start Your Conversion | Hawaii Cesspool Help">
<meta property="og:description" content="Begin your cesspool conversion. We coordinate with licensed engineers and local installers.">
<meta property="og:url" content="https://www.hawaiicesspoolhelp.com/start.html">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/hawaiisystemscoord-afk/asset@main/Beach.webp">

<!-- GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KX4BDJ7PYC"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-KX4BDJ7PYC');
</script>

<!-- reCAPTCHA v3 -->
<script src="https://www.google.com/recaptcha/api.js?render=6LeMzwMsAAAAAEY-A-PdNbOQADbKq9VmC8wStNPW" async defer></script>

<style>
:root{
 --font:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
 --green:#0A7A58; --deep:#0F2D25; --coral:#A32A19;
 --ink:#111; --bg:#f7f7f7; --card:#fff;
 --radius:14px; --shadow:0 10px 26px rgba(0,0,0,.07);
}
*{box-sizing:border-box}
body{
  margin:0;
  padding-top:70px;
  font-family:var(--font);
  color:var(--ink);
  background:var(--bg);
  line-height:1.55;
}
a{color:var(--green);text-decoration:none;outline:none;transition:box-shadow .2s, outline .2s}
a:focus{outline:2px solid #0A7A58;outline-offset:3px;box-shadow:0 0 0 3px rgba(10,122,88,.4)}
a:hover{color:#0c9c6c}
img{max-width:100%;display:block}
.btn{
  display:inline-block;background:var(--coral);color:#fff;padding:10px 20px;border-radius:var(--radius);
  font-weight:800;font-size:1rem;line-height:1.2;white-space:nowrap;transition:.15s;border:0;cursor:pointer;
  text-align:center;
}
.btn[disabled]{opacity:.7;cursor:not-allowed;transform:none}
.btn:focus{outline:2px solid #fff;outline-offset:3px;box-shadow:0 0 0 3px rgba(255,255,255,.4)}
.btn:hover{transform:translateY(-1px)}

/* navbar */
.navbar{
  position:fixed;
  top:0;
  left:0;
  right:0;
  height:70px;
  background:#0F2D25;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 16px;
  z-index:10000;
  box-shadow:0 2px 8px rgba(0,0,0,.25);
}
.navbar-brand{
  display:flex;
  align-items:center;
  gap:10px;
  color:#f5fff9;
  font-weight:800;
  font-size:1rem;
  text-decoration:none;
}
.navbar-brand img{
  height:30px;
  width:auto;
  border-radius:6px;
}
.navbar-cta{
  display:none;
}
.nav-toggle{
  background:none;
  border:0;
  color:#f5fff9;
  font-size:26px;
  cursor:pointer;
}
.nav-menu{
  position:absolute;
  top:70px;
  left:0;
  right:0;
  background:rgba(15,45,37,0.95);
  backdrop-filter:blur(8px);
  display:none;
  z-index:9999;
}
.nav-menu.open{
  display:block;
}
.nav-menu ul{
  list-style:none;
  margin:0;
  padding:8px 0;
}
.nav-menu li{
  border-top:1px solid rgba(255,255,255,.08);
}
.nav-menu a{
  display:block;
  padding:12px 18px;
  color:#f5fff9;
  text-decoration:none;
  font-weight:600;
  font-size:.98rem;
}
.nav-menu a:hover{
  background:rgba(255,255,255,.06);
}

/* desktop navbar layout */
@media (min-width:780px){
  .nav-toggle{
    display:none;
  }
  .navbar{
    height:70px;
    padding:0 32px;
  }
  .navbar-brand{
    flex:0 0 auto;
  }
  .navbar-cta{
    position:absolute;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:10001;
  }
  .navbar-cta a{
    padding:8px 18px;
    border-radius:14px;
    background:#A32A19;
    color:#fff;
    font-weight:800;
    text-decoration:none;
  }
  .navbar-cta a:hover{
    background:#8b2214;
  }
  .nav-menu{
    display:block;
    background:transparent;
    backdrop-filter:none;
    position:static;
  }
  .nav-menu ul{
    display:flex;
    gap:18px;
    padding:0;
  }
  .nav-menu li{
    border:0;
  }
  .nav-menu a{
    padding:0;
  }
}

/* hero */
header.hero{position:relative;color:#fff;text-align:center;overflow:hidden;background:#0A7A58}
.hero::before{content:"";position:absolute;inset:0;background:url("https://cdn.jsdelivr.net/gh/hawaiisystemscoord-afk/asset@main/Beach.webp") center/cover no-repeat}
.hero::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.85),rgba(0,0,0,.65))}
.hero-inner{position:relative;z-index:1;padding:96px 20px 24px;max-width:920px;margin:auto;text-shadow:0 2px 4px rgba(0,0,0,.35)}
.hero h1{margin:0;font-size:clamp(2.4rem,5vw,3.2rem);font-weight:900;color:#fafafa}
.hero p{margin:10px auto 0;max-width:760px;color:#eaf6f1;font-size:1.05rem}

/* trust ribbon */
.trust{background:#0F2D25;color:#d6efe6;text-align:center;padding:12px 16px;font-size:.98rem}

/* form */
main{max-width:980px;margin:28px auto;padding:0 20px}
.form-card{background:var(--card);border:1px solid #e8eeeb;border-radius:16px;box-shadow:var(--shadow);padding:22px}
h2{font-size:1.9rem;color:#0A7A58;margin:0 0 10px;text-align:center;font-weight:800}
p.lead{text-align:center;color:#4b5a56;margin:0 0 18px}
.grid{display:grid;gap:14px}
@media(min-width:860px){.grid-2{grid-template-columns:1fr 1fr}}

label{font-weight:700;margin-bottom:6px;display:block}
input,textarea,select{
  width:100%;padding:12px 14px;border:1px solid #dfe6e3;border-radius:12px;font-size:1rem;background:#fff
}
textarea{resize:vertical;min-height:100px}
.helper{font-size:.9rem;color:#53635e;margin-top:4px}

.consent{display:flex;align-items:flex-start;gap:10px}
.consent input{width:auto;margin-top:3px}

/* original .actions kept intact */
.actions{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:8px}

/* step-aware action rows */
.actions-ctl{display:grid;gap:10px;margin-top:8px}

/* NEW DESKTOP ACTION LAYOUT */
@media(min-width:640px){
  .actions-ctl{
    grid-template-columns:1fr auto;
    align-items:center;
  }
  .actions-ctl .left{justify-self:start}
  .actions-ctl .right{justify-self:end}
}

/* Mobile: stack and order = primary(top) -> back */
@media(max-width:639px){
  .actions-ctl{display:flex;flex-direction:column;align-items:center}
  .actions-ctl .btn{width:90%;margin:0 auto;display:flex;justify-content:center;align-items:center}
  .actions-ctl .primary{order:1}
  .actions-ctl .back{order:2}
}

small.privacy{display:block;text-align:center;color:#53635e;margin-top:8px}

.success{display:none;margin-top:14px;border:1px solid #cce9d9;background:#e9f7f0;color:#0a5038;padding:12px 14px;border-radius:12px}
.error{display:none;margin-top:14px;border:1px solid #f2c2c2;background:#fdeeee;color:#7a1212;padding:12px 14px;border-radius:12px}

/* footer */
footer{background:#0F2D25;color:#d9eee7;padding:34px 0;text-align:center;margin-top:40px}
footer a{color:#a1f0d3;outline:none;transition:box-shadow .2s, outline .2s}
footer a:focus{outline:2px solid #fff;outline-offset:3px;box-shadow:0 0 0 3px rgba(255,255,255,.4)}
footer a:hover{color:#c2fff0}

/* step visibility */
.step{display:none}
.step.active{display:block}
[aria-invalid="true"]{border-color:#d33; box-shadow:0 0 0 2px rgba(211,51,51,.1) inset}
.field-hint{display:none;color:#7a1212;font-size:.9rem;margin-top:6px}
.field-hint.active{display:block}

/* sticky progress bar */
.progress-sticky{
  position:fixed;left:50%;bottom:16px;transform:translateX(-50%);
  z-index:9999;width:min(980px,calc(100vw - 32px));
  background:#e8eeeb;border:1px solid #dfe6e3;border-radius:14px;overflow:hidden;
  box-shadow:0 6px 20px rgba(0,0,0,.18)
}
.progress-wrap{position:relative}
.progress-fill{height:44px;background:#A32A19;width:33.3333%;transition:width .25s}
.progress-text{
  position:absolute;inset:0;display:grid;place-items:center;
  font-weight:900;color:var(--deep);
}
@supports(padding: env(safe-area-inset-bottom)){
  .progress-sticky{bottom:calc(env(safe-area-inset-bottom) + 16px)}
}
body::after{content:"";display:block;height:100px}
</style>
</head>
<body>

<nav class="navbar">
  <a href="/" class="navbar-brand">
    <img src="https://cdn.jsdelivr.net/gh/hawaiisystemscoord-afk/asset@main/Hawaii%20Cesspool%20Help%20-%20Favicon.png" alt="Hawaiʻi Cesspool Help logo">
    <span>Hawaiʻi Cesspool Help</span>
  </a>

  <button class="nav-toggle" type="button" aria-label="Open menu" onclick="toggleNavMenu()">☰</button>

  <div class="nav-menu" id="nav-menu">
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/start.html">Start</a></li>
      <li><a href="/faq.html">FAQ</a></li>
      <li><a href="/guide.html">Guide</a></li>
      <li><a href="/privacy.html">Privacy</a></li>
    </ul>
  </div>
</nav>

<header class="hero">
  <div class="hero-inner">
    <h1>Start your cesspool conversion</h1>
    <p>We coordinate with licensed engineers and local installers based on your project needs.</p>
  </div>
</header>

<div class="trust">Local coordination across Hawaiʻi Island in Kona, Hilo, Waimea, Kohala, Puna, and Kaʻū.</div>

<main>
  <article class="form-card" id="formCard">
    <h2>Tell us about your project</h2>
    <p class="lead">Takes about 2 minutes.</p>

    <form id="longForm" class="grid" action="#" method="post" novalidate>

      <!-- Step 1 -->
      <div class="step active" id="step1" data-step="1" aria-labelledby="step1label">
        <div class="grid grid-2">
          <div>
            <label id="step1label" for="name">Full name</label>
            <input id="name" name="name" type="text" autocomplete="name" required>
            <div class="field-hint" id="hint-name">Please enter your name.</div>
          </div>
          <div>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" autocomplete="email" required>
            <div class="field-hint" id="hint-email">Enter a valid email.</div>
          </div>
          <div>
            <label for="phone">Contact number</label>
            <input id="phone" name="phone" type="tel" autocomplete="tel" inputmode="tel">
            <div class="helper">Mobile is best for quick follow ups.</div>
          </div>

          <div class="grid" style="grid-column:1/-1">
            <label class="consent">
              <input id="consent" name="consent" type="checkbox" value="I agree to be contacted" required>
              <span>I agree to be contacted by a licensed engineer, installer, or Hawaiʻi Cesspool Help about my project by text, phone call, or email.</span>
            </label>
            <div class="field-hint" id="hint-consent">Please agree to be contacted.</div>
          </div>
        </div>

        <div class="actions-ctl" aria-label="Step 1 actions">
          <div class="left" aria-hidden="true"></div>
          <button class="btn right primary" type="button" id="next1" disabled>Next</button>
        </div>
      </div>

      <!-- Step 2 -->
      <div class="step" id="step2" data-step="2" aria-labelledby="step2label">
        <div class="grid grid-2">
          <div>
            <label id="step2label" for="address">Site address</label>
            <input id="address" name="address" type="text" autocomplete="address-line1">
          </div>
          <div>
            <label for="tmk">TMK (if you know it)</label>
            <input id="tmk" name="tmk" type="text" placeholder="3-1-2-345-001" inputmode="numeric">
          </div>
          <div>
            <label for="ptype">Property type</label>
            <select id="ptype" name="property">
              <option value="" selected>Select one</option>
              <option>Single-family Home</option>
              <option>Ohana / ADU</option>
              <option>Duplex / Multi-unit</option>
              <option>Commercial</option>
              <option>Vacant land</option>
              <option>Other</option>
            </select>
          </div>
        </div>

        <div class="actions-ctl" aria-label="Step 2 actions">
          <button class="btn left back" type="button" id="back2">Back</button>
          <button class="btn right primary" type="button" id="next2">Next</button>
        </div>
      </div>

      <!-- Step 3 -->
      <div class="step" id="step3" data-step="3" aria-labelledby="step3label">
        <div class="grid grid-2">
          <div class="grid" style="grid-column:1/-1">
            <label id="step3label" for="notes">Message or notes</label>
            <textarea id="notes" name="message" placeholder="Optional details about your site, timing, or goals."></textarea>
          </div>
          <div>
            <label for="source">How did you hear about us</label>
            <input id="source" name="referral" type="text" placeholder="Friend, contractor, web search, flyer, etc.">
          </div>
        </div>

        <input type="text" id="miniCompany" name="company" value="" style="position:absolute;left:-9999px;width:1px;height:1px;opacity:0" tabindex="-1" autocomplete="off" aria-hidden="true">

        <div class="actions-ctl" aria-label="Step 3 actions">
          <button class="btn left back" type="button" id="back3">Back</button>
          <button id="submitBtn" class="btn right primary" type="submit" disabled>Submit</button>
        </div>

        <small class="privacy" style="grid-column:1/-1">Shared only for coordinating with licensed engineers and installers. Never sold.</small>
      </div>

      <div id="status" role="status" aria-live="polite" class="success" style="display:none;"></div>
      <div id="ok" class="success" style="display:none;">Thanks. Your details were sent.</div>
      <div id="err" class="error" style="display:none;">There was a problem. Please try again.</div>
    </form>

    <div id="stepLive" aria-live="polite" style="position:absolute;left:-9999px;height:1px;width:1px;overflow:hidden">Step 1 of 3</div>
  </article>
</main>

<footer>
  <div>Hawaiʻi Cesspool Help • Hawaiʻi Island Cesspool Conversion Coordination</div>
  <div>Phone: <a href="tel:8086576953">(808) 657-6953</a></div>
  <div>Contact: <a href="mailto:info@hawaiicesspoolhelp.com">info@hawaiicesspoolhelp.com</a></div>
  <div><a href="/privacy.html">Privacy Policy</a></div>
  <div>Hours: Mon-Fri 8am-6pm, Sat 9am-1pm, Sun Closed</div>
  <div style="margin-top:6px">Free coordination for homeowners • Supported by local professionals.</div>
  <div style="margin-top:8px">© <span id="y"></span> Hawaiʻi Cesspool Help</div>
  <div class="footer-social" style="text-align:center; margin-top:10px;">
    <a href="https://www.facebook.com/people/Hawaii-Cesspool-Help/61583423979776/"
       target="_blank" rel="noopener noreferrer"
       style="display:inline-block; width:36px; height:36px;">
      <svg viewBox="0 0 448 512" width="36" height="36" aria-label="Facebook"
           style="fill:#ffffff; transition:fill .2s;">
        <path d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.3V327.7h-63V256h63v-54.6c0-62.2 37-96.3 93.7-96.3 27.1 0 55.4 4.8 55.4 4.8v61h-31.2c-30.7 0-40.3 19-40.3 38.5V256h68.6l-10.9 71.7h-57.7V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"/>
      </svg>
    </a>

    <a href="https://www.instagram.com/hawaiicesspoolhelp"
       target="_blank" rel="noopener noreferrer"
       style="display:inline-block; width:36px; height:36px; margin-left:10px;">
      <svg aria-label="Instagram" xmlns="http://www.w3.org/2000/svg"
           viewBox="56 56 400 400" width="36" height="36" style="fill:#ffffff;">
        <path d="M349.33 69.33H162.67A93.44 93.44 0 0 0 69.33 162.67v186.66A93.44 93.44 0 0 0 162.67 442.67h186.66A93.44 93.44 0 0 0 442.67 349.33V162.67A93.44 93.44 0 0 0 349.33 69.33zM256 346.67A90.67 90.67 0 1 1 346.67 256 90.77 90.77 0 0 1 256 346.67zm96-196a22.67 22.67 0 1 1 22.67-22.67A22.71 22.71 0 0 1 352 150.67z"/>
      </svg>
    </a>

    <a href="https://x.com/HICesspoolHelp" target="_blank" style="display:inline-block;width:36px;height:36px;margin-left:10px;">
      <svg viewBox="0 0 512 512" width="36" height="36" style="fill:#fff">
        <path d="M389.2 48H472L303.3 230.2 512 464H353.6L230.3 318.6 92.2 464H8L187.5 270.8 0 48H163.2L276.2 178.6 389.2 48zM360.8 421.9h43.7L153.7 90.1H109.3l251.5 331.8z"/>
      </svg>
    </a>
    
  </div>
  <div style="font-size:13px;color:#555;margin-top:6px;">
    This site is protected by reCAPTCHA and the
    <a href="https://policies.google.com/privacy" target="_blank" rel="noopener noreferrer">Google Privacy Policy</a>
    and
    <a href="https://policies.google.com/terms" target="_blank" rel="noopener noreferrer">Terms of Service</a>
    apply.
  </div>

  <style>.grecaptcha-badge{visibility:hidden!important}</style>

</footer>

<div class="progress-sticky" role="region" aria-label="Form progress">
  <div class="progress-wrap">
    <div class="progress-fill" id="pFill" aria-hidden="true"></div>
    <div class="progress-text" id="pText">Step 1 of 3: Contact Information</div>
  </div>
</div>

<script>
function toggleNavMenu(){
  var menu = document.getElementById('nav-menu');
  if(menu){
    menu.classList.toggle('open');
  }
}

document.getElementById('y').textContent=new Date().getFullYear();

const ENDPOINT = 'https://script.google.com/macros/s/AKfycby0TAMlk-9VbpveG45R2Jf5HOUVTvSr6LlbYry_fKCGKeB0jj6vjSVVKnhhWbG-0KBf3A/exec';

function validEmail(e){return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);}
function s(x){return (x||'').replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,'').trim();}

(function(){
  try{
    const n = sessionStorage.getItem('lead_name') || '';
    const m = sessionStorage.getItem('lead_email') || '';
    if(n) document.getElementById('name').value = n;
    if(m) document.getElementById('email').value = m;
  }catch(_){}
})();

(function(){
  const ids=['name','email','phone','address','tmk','ptype','notes','source','consent'];
  ids.forEach(id=>{
    const el=document.getElementById(id);
    if(!el) return;
    try{
      const stored=sessionStorage.getItem('sf_'+id);
      if(stored!=null){
        if(el.type==='checkbox') el.checked = stored==='1';
        else el.value = stored;
      }
      el.addEventListener(el.type==='checkbox'?'change':'input',()=>{
        sessionStorage.setItem('sf_'+id, el.type==='checkbox' ? (el.checked?'1':'0') : el.value);
        if(id==='name') sessionStorage.setItem('lead_name', el.value||'');
        if(id==='email') sessionStorage.setItem('lead_email', el.value||'');
        if(id==='consent'){ toggleSubmit(); toggleNext1(); }
        if(id==='name' || id==='email') toggleNext1();
      });
    }catch(_){}
  });
})();

function getRecaptchaToken(action){
  const MAX = 1200;
  return new Promise((resolve)=>{
    let done=false;
    const t=setTimeout(()=>{ if(!done){ done=true; resolve(''); } }, MAX);
    try{
      if(window.grecaptcha && grecaptcha.execute){
        grecaptcha.execute('6LeMzwMsAAAAAEY-A-PdNbOQADbKq9VmC8wStNPW', {action}).then(tok=>{
          if(!done){ done=true; clearTimeout(t); resolve(tok||''); }
        }).catch(()=>{ if(!done){ done=true; clearTimeout(t); resolve(''); } });
      }else{
        if(!done){ done=true; clearTimeout(t); resolve(''); }
      }
    }catch(_){
      if(!done){ done=true; clearTimeout(t); resolve(''); }
    }
  });
}

const f = document.getElementById('longForm');
const ok = document.getElementById('ok');
const err = document.getElementById('err');
const statusLine = document.getElementById('status');
const btn = document.getElementById('submitBtn');

const steps = [document.getElementById('step1'), document.getElementById('step2'), document.getElementById('step3')];
let current = 0;
const stepLive = document.getElementById('stepLive');
const pText = document.getElementById('pText');
const pFill = document.getElementById('pFill');

function setProgress(i){
  const texts=[
    'Step 1 of 3: Contact Information',
    'Step 2 of 3: Property Details',
    'Step 3 of 3: Final Details'
  ];
  pText.textContent = texts[i];
  pFill.style.width = ((i+1)/3*100)+'%';
  stepLive.textContent = texts[i];
}

function showStep(i){
  steps.forEach((s,idx)=>s.classList.toggle('active', idx===i));
  current = i;
  setProgress(i);
  const first = steps[i].querySelector('input,select,textarea,button');
  if(first) first.focus({preventScroll:true});
  try{ document.getElementById('formCard').scrollIntoView({behavior:'smooth', block:'start'}); }catch(_){}
  toggleSubmit();
}

function markInvalid(el, hintId, on){
  if(!el) return;
  el.setAttribute('aria-invalid', on?'true':'false');
  const h=document.getElementById(hintId);
  if(h) h.classList.toggle('active', !!on);
}

function validateStep1(){
  const name = s(document.getElementById('name').value);
  const email = s(document.getElementById('email').value);
  const consent = document.getElementById('consent').checked;
  let bad = false;
  if(!name){ bad=true; markInvalid(document.getElementById('name'),'hint-name',true); }
  else markInvalid(document.getElementById('name'),'hint-name',false);
  if(!email || !validEmail(email)){ bad=true; markInvalid(document.getElementById('email'),'hint-email',true); }
  else markInvalid(document.getElementById('email'),'hint-email',false);
  if(!consent){ bad=true; markInvalid(document.getElementById('consent'),'hint-consent',true); }
  else markInvalid(document.getElementById('consent'),'hint-consent',false);

  if(bad){
    err.textContent='Please enter name, a valid email, and agree to be contacted.';
    err.style.display='block';
    statusLine.style.display='none';
    if(!name) document.getElementById('name').focus();
    else if(!validEmail(email)) document.getElementById('email').focus();
    else document.getElementById('consent').focus();
    return false;
  }
  err.style.display='none';
  return true;
}

function toggleSubmit(){
  const consent = document.getElementById('consent').checked;
  if(btn) btn.disabled = !consent;
  if(current===2) markInvalid(document.getElementById('consent'),'hint-consent', !consent);
}

function toggleNext1(){
  const name = s(document.getElementById('name').value);
  const email = s(document.getElementById('email').value);
  const consent = document.getElementById('consent').checked;
  const next1 = document.getElementById('next1');
  if(next1) next1.disabled = !(name && validEmail(email) && consent);
}

let shortSent = false;
function sendShortLeadOnce(){
  if(shortSent) return;
  shortSent = true;
  try{ sessionStorage.setItem('short_lead_ping','1'); }catch(_){}
  try{
    const name  = s(document.getElementById('name').value);
    const email = s(document.getElementById('email').value);
    if(!name && !email) return;
    const fd = new FormData();
    fd.set('name', name);
    fd.set('email', email);
    fd.set('v','v');
    fetch(ENDPOINT, { method:'POST', body:fd, credentials:'omit', keepalive:true });
    try{ if(window.gtag) gtag('event','lead_submit',{form:'short',method:'start_short',page_location:location.href}); }catch(_){}
  }catch(_){}
}

document.getElementById('next1').addEventListener('click', ()=>{
  if(!validateStep1()) return;
  try{ if(!sessionStorage.getItem('short_lead_ping')) sendShortLeadOnce(); }catch(_){ sendShortLeadOnce(); }
  showStep(1);
});
document.getElementById('back2').addEventListener('click', ()=>showStep(0));
document.getElementById('next2').addEventListener('click', ()=>showStep(2));
document.getElementById('back3').addEventListener('click', ()=>showStep(1));

f.addEventListener('submit', (e)=>{
  e.preventDefault();
  ok.style.display='none'; err.style.display='none'; statusLine.style.display='none';

  const consent = document.getElementById('consent').checked;
  if(!consent){
    markInvalid(document.getElementById('consent'),'hint-consent',true);
    err.textContent='Please agree to be contacted.';
    err.style.display='block';
    document.getElementById('consent').focus();
    return;
  }

  const name  = s(document.getElementById('name').value);
  const email = s(document.getElementById('email').value);
  if(!name || !email || !validEmail(email)){
    showStep(0);
    validateStep1();
    return;
  }

  const original = btn.textContent;
  btn.disabled = true;
  btn.textContent = 'Submitting…';
  statusLine.textContent = 'Submitting…';
  statusLine.style.display = 'block';

  getRecaptchaToken('long_form').then((token)=>{
    try{
      const CONSENT_LABEL = 'I agree to be contacted by a licensed engineer or installer to discuss my project.';
      const fd = new FormData();
      fd.set('name', name);
      fd.set('email', email);
      fd.set('company', s(document.getElementById('miniCompany').value));
      fd.set('v','v');
      fd.set('recaptcha_v3', token);

      const map = [
        ['phone','phone'],
        ['address','address'],
        ['tmk','tmk'],
        ['property','ptype'],
        ['message','notes'],
        ['referral','source']
      ];
      for(const [k,id] of map){
        const el = document.getElementById(id);
        if(el) fd.set(k, s(el.value));
      }
      fd.set('consent', consent ? CONSENT_LABEL : '');

      fetch(ENDPOINT, { method:'POST', body:fd, credentials:'omit', keepalive:true });
      try{ if(window.gtag) gtag('event','lead_submit',{form:'long',method:'start_long',page_location:location.href}); }catch(_){}
    }catch(_){}
  });

  setTimeout(()=>{
    try{ btn.textContent='Submitted'; }catch(_){}
    statusLine.textContent='Received. Redirecting…';
    window.location.href = '/thankyou.html';
  }, 500);
});

setProgress(0);
toggleSubmit();
toggleNext1();
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "Hawaiʻi Cesspool Help",
  "url": "https://www.hawaiicesspoolhelp.com/",
  "email": "info@hawaiicesspoolhelp.com",
  "image": "https://cdn.jsdelivr.net/gh/hawaiisystemscoord-afk/asset@main/Beach.webp",
  "areaServed": [ "Kona", "Hilo", "Waimea", "Kohala", "Puna", "Kaʻū" ],
  "serviceArea": {
    "@type": "Place",
    "name": "Hawaiʻi Island (Kona, Hilo, Waimea, Kohala, Puna, and Kaʻū)"
  },
  "openingHoursSpecification": [
    { "@type": "OpeningHoursSpecification", "dayOfWeek": ["Monday","Tuesday","Wednesday","Thursday","Friday"], "opens": "08:00", "closes": "18:00" },
    { "@type": "OpeningHoursSpecification", "dayOfWeek": "Saturday", "opens": "09:00", "closes": "13:00" }
  ],
  "telephone": "+1-808-657-6953",
  "description": "Free coordination for cesspool to septic conversions across Hawaiʻi Island. Connect with licensed engineers and installers for compliant, fast conversions.",
  "sameAs": []
}
</script>
</body>
</html>
